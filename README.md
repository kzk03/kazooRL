# Kazoo - OSS é–‹ç™ºãƒ—ãƒ­ã‚»ã‚¹ ãƒãƒ«ãƒã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå¼·åŒ–å­¦ç¿’ã‚·ã‚¹ãƒ†ãƒ 

Kazoo ã¯ã€ã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ï¼ˆOSSï¼‰é–‹ç™ºãƒ—ãƒ­ã‚»ã‚¹ã«ãŠã‘ã‚‹ã‚¿ã‚¹ã‚¯æ¨è–¦ã‚·ã‚¹ãƒ†ãƒ ã‚’ãƒãƒ«ãƒã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå¼·åŒ–å­¦ç¿’ã§å®Ÿç¾ã™ã‚‹ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã™ã€‚Graph Attention Networkï¼ˆGATï¼‰ç‰¹å¾´é‡ã€é€†å¼·åŒ–å­¦ç¿’ï¼ˆIRLï¼‰ã€PPO å¼·åŒ–å­¦ç¿’ã‚’çµ„ã¿åˆã‚ã›ã¦ã€é–‹ç™ºè€…ã¸ã®æœ€é©ãªã‚¿ã‚¹ã‚¯æ¨è–¦ã‚’è¡Œã„ã¾ã™ã€‚

## ğŸŒŸ ä¸»ãªç‰¹å¾´

- **GAT ç‰¹å¾´é‡**: Graph Attention Network ã«ã‚ˆã‚‹é–‹ç™ºè€…ãƒ»ã‚¿ã‚¹ã‚¯é–“ã®é–¢ä¿‚æ€§å­¦ç¿’
- **é€†å¼·åŒ–å­¦ç¿’**: ã‚¨ã‚­ã‚¹ãƒ‘ãƒ¼ãƒˆè»Œè·¡ã‹ã‚‰ã®å ±é…¬é–¢æ•°å­¦ç¿’
- **ãƒãƒ«ãƒã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå¼·åŒ–å­¦ç¿’**: è¤‡æ•°é–‹ç™ºè€…ã®å”èª¿å­¦ç¿’
- **ã‚ªãƒ³ãƒ©ã‚¤ãƒ³å­¦ç¿’**: ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§ã®å­¦ç¿’æ›´æ–°
- **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ é€²æ—è¡¨ç¤º**: è‰²åˆ†ã‘ã•ã‚ŒãŸ tqdm é€²æ—ãƒãƒ¼ã«ã‚ˆã‚‹å¯è¦–åŒ–

## ğŸš€ ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ

### 1. ç’°å¢ƒæ§‹ç¯‰

```bash
# ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ã‚¯ãƒ­ãƒ¼ãƒ³
git clone <repository-url>
cd kazoo

# ä¾å­˜é–¢ä¿‚ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ï¼ˆuvä½¿ç”¨ï¼‰
uv sync
```

### 2. ãƒ‡ãƒ¼ã‚¿æº–å‚™

```bash
# å­¦ç¿’ãƒ»ãƒ†ã‚¹ãƒˆç”¨ãƒ‡ãƒ¼ã‚¿ã®ç”Ÿæˆ
python tools/data_processing/generate_backlog.py
python tools/data_processing/generate_profiles.py
```

### 3. çµ±åˆå­¦ç¿’ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã®å®Ÿè¡Œ

```bash
# ãƒ•ãƒ«å­¦ç¿’ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ï¼ˆGAT â†’ IRL â†’ RLï¼‰
python scripts/full_training_pipeline.py --config configs/base_training.yaml

# å€‹åˆ¥ã‚¹ãƒ†ãƒƒãƒ—ã®å®Ÿè¡Œ
python scripts/full_training_pipeline.py --skip-gnn    # GNNè¨“ç·´ã‚’ã‚¹ã‚­ãƒƒãƒ—
python scripts/full_training_pipeline.py --skip-irl    # IRLè¨“ç·´ã‚’ã‚¹ã‚­ãƒƒãƒ—
python scripts/full_training_pipeline.py --skip-rl     # RLè¨“ç·´ã‚’ã‚¹ã‚­ãƒƒãƒ—
```

### 4. è©•ä¾¡

```bash
# 2022å¹´ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã§ã®è©•ä¾¡
python scripts/evaluate_2022_test.py \
  --config configs/base_test_2022.yaml \
  --learned-weights data/learned_weights_training.npy
```

## ğŸ“Š é€²æ—è¡¨ç¤º

å­¦ç¿’ä¸­ã¯è‰²åˆ†ã‘ã•ã‚ŒãŸé€²æ—ãƒãƒ¼ã§é€²è¡ŒçŠ¶æ³ã‚’å¯è¦–åŒ–ï¼š

- ğŸ§  **GAT è¨“ç·´** (ã‚·ã‚¢ãƒ³): ã‚¨ãƒãƒƒã‚¯é€²è¡Œã€æå¤±çµ±è¨ˆ
- ğŸ¯ **IRL å­¦ç¿’** (é’): ã‚¨ãƒãƒƒã‚¯ãƒ»ã‚¹ãƒ†ãƒƒãƒ—é€²è¡Œã€å¹³å‡æå¤±ã€æœ‰åŠ¹ã‚¹ãƒ†ãƒƒãƒ—æ•°
- ğŸ¤– **PPO å­¦ç¿’** (ãƒã‚¼ãƒ³ã‚¿): Updateãƒ»Step é€²è¡Œã€å ±é…¬çµ±è¨ˆ
- ğŸ“Š **è©•ä¾¡** (ç·‘): ã‚¿ã‚¹ã‚¯é€²è¡Œã€Top-K ç²¾åº¦ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ è¡¨ç¤º

## ğŸ—ï¸ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   GAT Training  â”‚â”€â”€â”€â–¶â”‚   IRL Learning  â”‚â”€â”€â”€â–¶â”‚   RL Training   â”‚
â”‚  (Graph-based   â”‚    â”‚ (Reward from    â”‚    â”‚ (Multi-agent    â”‚
â”‚   features)     â”‚    â”‚  expert data)   â”‚    â”‚   learning)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                       â”‚                       â”‚
         â–¼                       â–¼                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Developer-Task  â”‚    â”‚ Reward Weights  â”‚    â”‚ Trained Agents  â”‚
â”‚   Embeddings    â”‚    â”‚   (.npy file)   â”‚    â”‚   (.pt files)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ 

```
kazoo/
â”œâ”€â”€ configs/                    # è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«
â”‚   â”œâ”€â”€ base_training.yaml     # å­¦ç¿’ç”¨è¨­å®š
â”‚   â””â”€â”€ base_test_2022.yaml    # ãƒ†ã‚¹ãƒˆç”¨è¨­å®š
â”œâ”€â”€ data/                      # ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚¡ã‚¤ãƒ«
â”‚   â”œâ”€â”€ backlog_training.json  # å­¦ç¿’ç”¨ãƒãƒƒã‚¯ãƒ­ã‚°
â”‚   â”œâ”€â”€ backlog_test_2022.json # ãƒ†ã‚¹ãƒˆç”¨ãƒãƒƒã‚¯ãƒ­ã‚°
â”‚   â””â”€â”€ *.pt, *.npy           # å­¦ç¿’æ¸ˆã¿ãƒ¢ãƒ‡ãƒ«ãƒ»é‡ã¿
â”œâ”€â”€ scripts/                   # å®Ÿè¡Œã‚¹ã‚¯ãƒªãƒ—ãƒˆ
â”‚   â”œâ”€â”€ full_training_pipeline.py  # çµ±åˆå­¦ç¿’ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³
â”‚   â”œâ”€â”€ train_collaborative_gat.py # GATè¨“ç·´
â”‚   â”œâ”€â”€ evaluate_2022_test.py      # è©•ä¾¡ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
â”‚   â””â”€â”€ ...
â”œâ”€â”€ src/kazoo/                 # ã‚³ã‚¢ãƒ©ã‚¤ãƒ–ãƒ©ãƒª
â”‚   â”œâ”€â”€ agents/               # ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå®Ÿè£…
â”‚   â”œâ”€â”€ envs/                 # ç’°å¢ƒå®šç¾©
â”‚   â”œâ”€â”€ features/             # ç‰¹å¾´é‡æŠ½å‡º
â”‚   â”œâ”€â”€ gnn/                  # GNNãƒ¢ãƒ‡ãƒ«
â”‚   â”œâ”€â”€ learners/             # å­¦ç¿’ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ 
â”‚   â””â”€â”€ utils/                # ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
â””â”€â”€ tools/                    # ãƒ‡ãƒ¼ã‚¿å‡¦ç†ãƒ„ãƒ¼ãƒ«
    â””â”€â”€ data_processing/      # ãƒ‡ãƒ¼ã‚¿ç”Ÿæˆãƒ»å¤‰æ›
```

## âš™ï¸ è¨­å®š

### ä¸»è¦ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ï¼ˆ`configs/base_training.yaml`ï¼‰

```yaml
num_developers: 5170 # å¯¾è±¡é–‹ç™ºè€…æ•°
irl:
  epochs: 300 # IRLå­¦ç¿’ã‚¨ãƒãƒƒã‚¯æ•°
  learning_rate: 0.0005 # IRLå­¦ç¿’ç‡
rl:
  total_timesteps: 2000000 # RLå­¦ç¿’ã‚¹ãƒ†ãƒƒãƒ—æ•°
  learning_rate: 0.0001 # RLå­¦ç¿’ç‡
```

## ğŸ“ˆ è©•ä¾¡æŒ‡æ¨™

- **Top-1 Accuracy**: æ¨è–¦ 1 ä½ãŒæ­£è§£ã®å‰²åˆ
- **Top-3 Accuracy**: æ¨è–¦ä¸Šä½ 3 ä½å†…ã«æ­£è§£ãŒå«ã¾ã‚Œã‚‹å‰²åˆ
- **Top-5 Accuracy**: æ¨è–¦ä¸Šä½ 5 ä½å†…ã«æ­£è§£ãŒå«ã¾ã‚Œã‚‹å‰²åˆ

## ğŸ”§ é–‹ç™º

### ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ

```bash
# é€²æ—ãƒãƒ¼ã®ãƒ†ã‚¹ãƒˆ
python test_progress_bars.py

# å˜ä½“ãƒ†ã‚¹ãƒˆ
pytest tests/
```

### ã‚³ãƒ¼ãƒ‰å“è³ª

```bash
# Ruffã«ã‚ˆã‚‹ãƒªãƒ³ã‚¿ãƒ¼ãƒ»ãƒ•ã‚©ãƒ¼ãƒãƒƒã‚¿ãƒ¼
uv run ruff check .
uv run ruff format .
```
